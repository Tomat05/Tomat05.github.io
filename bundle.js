(()=>{"use strict";class t{constructor(t,i){this.x=t,this.y=i}set(t,i){this.x=t,this.y=i}add(t,i){this.x+=t,this.y+=i}mult(t){this.x*=t,this.y*=t}}class i{constructor(t,i){this.ctx=t,this.image=function(t){if(!("string"==typeof t||t instanceof String))return Array.isArray(t)&&t.every((t=>"number"==typeof t))&&t.length>=3?(3===t.length&&t.push(255),t):(console.error("Invalid type for backdrop: should be string or number[3 or 4]"),[255,255,255,255]);if("#"===t[0])return t;{let i=new Image;try{return i.src=t,i}catch(i){return console.error(`Failed to load image at ${t}`),[255,255,255,255]}}}(i.image),this.position=i.position,this.size=i.size,this.rotation=i.rotation}update(){}draw(){this.ctx.beginPath(),this.image instanceof HTMLImageElement?this.ctx.drawImage(this.image,0,0,this.size.x,this.size.y):("string"==typeof this.image?this.ctx.fillStyle=this.image:this.ctx.fillStyle=`rgb(${this.image[0]}, ${this.image[1]}, ${this.image[2]}, ${this.image[3]})`,this.ctx.rect(this.position.x,this.position.y,this.size.x,this.size.y),this.ctx.fill()),this.ctx.closePath()}}class s extends i{constructor(i,s){super(i,{image:s.backdrop,position:new t(0,0),size:new t(i.canvas.width,i.canvas.height),rotation:0})}resize(){this.size.set(this.ctx.canvas.offsetWidth,this.ctx.canvas.offsetHeight)}}class e{constructor(){this.instance=document.getElementById("game"),this.ctx=this.instance.getContext("2d"),this.stage=new s(this.ctx,{backdrop:"#d8dee9"}),this.onResize(),this.sprites=new Array}onResize(){this.instance.style.width="100%",this.instance.style.height="100%",this.instance.width=this.instance.offsetWidth,this.instance.height=this.instance.offsetHeight,this.stage.resize()}addSprite(t){this.sprites.push(new i(this.ctx,t))}draw(){this.ctx.clearRect(0,0,this.instance.width,this.instance.height),this.stage.draw();for(let t=0;t<this.sprites.length;t++)this.sprites[t].update(),this.sprites[t].draw()}}let n=new class{constructor(){this.graphicsManager=new e,this.running=!1,this.graphicsManager.addSprite({image:"#bf616a",position:new t(200,200),size:new t(100,100),rotation:0})}start(){this.running=!0,this.gameLoop()}stop(){this.running=!1}onResize(){this.graphicsManager.onResize()}gameLoop(){this.graphicsManager.draw(),this.running&&window.requestAnimationFrame((()=>this.gameLoop()))}};n.start(),window.addEventListener("resize",(()=>{n.onResize()}))})();